<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tom Demo</title>

<link rel="stylesheet" href="../../css/nost.css" />
<link rel="stylesheet" href="tom.css" />
<script type="text/javascript" src="../../dojo/dojo.js"
	data-dojo-config="async:true,has:{'dojo-firebug':true}"></script>
<script type="text/javascript" src="../../js/parser.js"></script>
<script type="text/javascript" src="tom.js"></script>

</head>
<body>
	<svg id="sketchpad" version="1.1" xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 640 1136" style="background-color: #ABCDEF">
		<defs>
			<filter id="shadowed" x="0" y="0" width="150%" height="180%"
			filterUnits="objectBoundingBox">
				<feOffset in="SourceAlpha" dx="3" dy="3" result="offset" />
				<feGaussianBlur in="offset" stdDeviation="4" result="blur" />
				<feBlend in="SourceGraphic" in2="blur" />
			</filter>
			<linearGradient id="lineGra-h" x1="0%" y1="0%" x2="0%" y2="100%"
			spreadMethod="pad">
      			<stop offset="0%" stop-color="#CCCCCC" stop-opacity="0.5" />
      			<stop offset="50%" stop-color="#CCCCCC" stop-opacity="1" />
      			<stop offset="100%" stop-color="#CCCCCC" stop-opacity="0.5" />
    		</linearGradient>
    		<linearGradient id="lineGra-v" x1="0%" y1="0%" x2="100%" y2="0%"
			spreadMethod="pad">
      			<stop offset="0%" stop-color="#CCCCCC" stop-opacity="0.5" />
      			<stop offset="50%" stop-color="#CCCCCC" stop-opacity="1" />
      			<stop offset="100%" stop-color="#CCCCCC" stop-opacity="0.5" />
    		</linearGradient>
    		<g id="pump">
    			<path d="m30,80 a40,40 0 1,1 40,0 l10,10 l-60,0 l10,-10"
			style="stroke:black;stroke-width:2px;fill:none;" />
    			<circle cx="50" cy="45" r="30"
			style="fill:none;stroke:black;stroke-width:2px;" />
    			<g id="pumpleaf">
    				<ellipse cx="50" cy="45" rx="5" ry="30"
			style="fill:none;stroke:black;stroke-width:2px;" />
    				<ellipse cx="50" cy="45" rx="5" ry="30"
			style="fill:none;stroke:black;stroke-width:2px;"
			transform="rotate(45,50,45)" />
    				<ellipse cx="50" cy="45" rx="5" ry="30"
			style="fill:none;stroke:black;stroke-width:2px;"
			transform="rotate(90,50,45)" />
    				<ellipse cx="50" cy="45" rx="5" ry="30"
			style="fill:none;stroke:black;stroke-width:2px;"
			transform="rotate(135,50,45)" />
    				<animateTransform attributeName="transform" type="rotate"
			from="0,50,45" to="180,50,45" begin="0s" dur="2s" fill="freeze"
			repeatCount="indefinite" />
    			</g>
    		</g>
    		<linearGradient id="fillperc" x2="0%" y2="100%">
        		<stop offset="40%" stop-color="red" />
        		<stop offset="40%" stop-color="yellow" />
      		</linearGradient>
      		
    		<g id="tank">
    			<path
			d="m10,20 a180,180 0 0,1 200,0 l0,10 l10,0 l0,10 l-10,0 l0,300 l10,0 l0,10 l-10,0 l0,10
    					a180,180 0 0,1 -200,0 l0,-10 l-10,0 l0,-10 l10,0 l0,-300 l-10,0 l0,-10 l10,0 l0,-10"
			style="fill:#CCCC99;stroke:black;stroke-width:2px;" />
    			<ellipse cx="150" cy="190" rx="20" ry="160"
			style="fill:url(#fillperc);stroke:black;stroke-width:2px;" />
    		</g>
    		<g id="pipe-rightdown">
    			<path
			d="m0,0 l20,0 a20,20 0 0,1 20,20 l0,20 l-20,0 l0,-20 l-20,0"
			class="pipeline" />
    		</g>
    		
		</defs>
			
		<rect id="test1" x="110" y="50" width="480" height="20" rx="5" ry="5"
			class="pipeline-h" />
		<rect x="110" y="150" width="330" height="20" rx="5" ry="5"
			class="pipeline-h" />
		<rect x="570" y="50" width="20" height="160" rx="5" ry="5"
			class="pipeline-v" />
		<rect x="430" y="150" width="20" height="60" rx="5" ry="5"
			class="pipeline-v" />

		<use xlink:href="#pump" x="20" y="20" />
<!-- 		<use id ="pump1switch" xlink:href="#switch" x="120" y="10" /> -->
		<svg x="120" y="10"
			cus='{"watch_value":"rand_tag1"}' 
			class="binding-unit" ntype="basichmi_switch"
			mt='[{"trigger_field":"watch_value",
				"matchstatus":{"status":"on",
								"v1array":[50],
								"cmparray":["co"],
								"v2array":[9999999999]}},
				{"trigger_field":"watch_value",
				"matchstatus":{"status":"off",
								"v1array":[-9999999999],
								"cmparray":["oo"],
								"v2array":[50]}}]' 
			ec='{"switchon":"pump1switch_open()",
				"switchoff":"pump1switch_close()"}' 
			id="pump1switch">
			<g> 
				<rect x="0" y="0" width="100" height="40"
					style="fill:gray;stroke:black;stroke-width:2px;" />
				<rect x="5" y="5" width="45" height="30"
					style="fill:green;stroke:black;stroke-width:2px" /> 
				<rect x="50" y="5" width="45" height="30"
					style="fill:red;stroke:black;stroke-width:2px" />
				<text x="10" y="25">开</text>
				<text x="60" y="25">关</text>
				<g id="pump1switch_a6e58d51-9592-4c03-bc31-b747713f092f"> 
					<rect x="5" y="6" width="45" height="28"
						style="fill:darkgray;stroke:black;stroke-width:1px;" /> 
					<line x1="15" y1="10" x2="15" y2="30"
						style="stroke:black;stroke-width:5px;" /> 
					<line x1="25" y1="10" x2="25" y2="30"
						style="stroke:black;stroke-width:5px;" />
					<line x1="35" y1="10" x2="35" y2="30"
						style="stroke:black;stroke-width:5px;" /> 
				</g>
			</g>
		</svg>
		<use xlink:href="#pump" x="20" y="120" />
<!-- 		<use id ="pump2switch" xlink:href="#switch" x="120" y="120" /> -->
		<svg x="120" y="120"
			cus='{"watch_value":"rand_tag2"}' 
			class="binding-unit" ntype="basichmi_switch"
			mt='[{"trigger_field":"watch_value",
				"matchstatus":{"status":"on",
								"v1array":[30],
								"cmparray":["co"],
								"v2array":[9999999999]}},
				{"trigger_field":"watch_value",
				"matchstatus":{"status":"off",
								"v1array":[-9999999999],
								"cmparray":["oo"],
								"v2array":[30]}}]' 
			ec='{"switchon":"pump2switch_open()",
				"switchoff":"pump2switch_close()"}' 
			id="pump2switch">
		<g> 
			<rect x="0" y="0" width="100" height="40"
				style="fill:gray;stroke:black;stroke-width:2px;" />
			<rect x="5" y="5" width="45" height="30"
				style="fill:green;stroke:black;stroke-width:2px" /> 
			<rect x="50" y="5" width="45" height="30"
				style="fill:red;stroke:black;stroke-width:2px" />
			<text x="10" y="25">开</text>
			<text x="60" y="25">关</text>
			<g id="pump2switch_a6e58d51-9592-4c03-bc31-b747713f092f"> 
				<rect x="5" y="6" width="45" height="28"
					style="fill:darkgray;stroke:black;stroke-width:1px;" /> 
				<line x1="15" y1="10" x2="15" y2="30"
					style="stroke:black;stroke-width:5px;" /> 
				<line x1="25" y1="10" x2="25" y2="30"
					style="stroke:black;stroke-width:5px;" />
				<line x1="35" y1="10" x2="35" y2="30"
					style="stroke:black;stroke-width:5px;" /> 
			</g>
		</g>
		</svg>
		<use xlink:href="#tank" x="400" y="200" />
		<text x="490" y="210" textLength="50" class="text">水箱</text>
	</svg>
<page name="tom" refreshRate = "6000" id="pagemetas" authItem="{name:page_can,id:4}"/>
</body>
</html>